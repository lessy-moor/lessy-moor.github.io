<html>
<head>
	<title>Создать виджет для сообщества</title>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script src="https://vk.com/js/api/xd_connection.js?2"></script>
	<style>
		#content { display: none; }
	</style>
</head>
<body>
	<h1>Создать виджет для сообщества</h1>
	<h2>Панель управления виджетом 10</h2>
	<p id="message"></p>
	<div id="content">
		<button onclick="VK.callMethod('showGroupSettingsBox', 0);">Запросить права доступа</button>
		<button onclick="Preview();">Предварительный просмотр виджета</button>
		<br><br><br><br>
	</div>
	<script type="text/javascript">
		var code={ 
"title": "Рестораны", 
"rows": {{ 
"title": "Корюшка", 
"title_url": "https://vk.com", 
"button": "Забронировать стол", 
"button_url": "vk.com", 
"address": "Петропавловская крепость, д. 3", 
"time": "Каждый день с 12:00 до 1:00", 
"text": "Если бы Петр I решил построить ресторан, это была бы «Корюшка» — заведение с видом на стрелку Васильевского острова, прямо у Петропавловской вблизи шумных вод Невы." 
}, { 
"title": "Food Park", 
"title_url": "https://vk.com", 
"button": "Забронировать стол", 
"button_url": "https://vk.com", 
"address": "Александровский парк, д. 4/3, лит. А", 
"time": "Каждый день с 12:00 до 1:00", 
"text": "Давно ли вы красиво, с чувством и толком ели в парке? Главное украшение Александровского парка — Food Park приглашает на еду со всех концов света на четвертый этаж ТРЦ «Великан»." 
}} 
};
		code=JSON.stringify(code, null, ' ');
		code="return "+code+";";
		//Инициализация приложения
		VK.init(function() { 
			 $("#message").append("Подключение к API выполнено успешно!<br><br>");
			 $("#content").show();
		}, function() { 
			 $("#message").append("Ошибка при подключении к API<br><br>");
		}, '5.78'); 
		//Предпросмотр и установка виджета
		function Preview() {
			$("#message").text(window.code);
			VK.callMethod("showAppWidgetPreviewBox", "text", window.code);
		}
	</script>
</body>
</html>